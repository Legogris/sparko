sparko
======

`sparko` (`spark + go`?) is a reimplementation of the [spark-wallet](https://github.com/shesek/spark-wallet) server, along with a repackaging of its client such that it is distributed as a single binary.

Since it's written in Go hopefully it will be a little faster and lighter than the original server, and easier to use too since it's a single binary.

How to use
----------

Grab your binary from [the releases page](https://github.com/fiatjaf/spark/releases) and run it.

The options are _almost_ the same:

```
~> sparko --help

A minimalistic wallet GUI for c-lightning repackaged

Usage
  $ sparko [options]

Options
      --force-tls         enable TLS even when binding on localhost
  -h, --help              output usage information
  -i, --host string       http(s) server listen address (default "localhost")
  -l, --ln-path string    path to c-lightning data directory (default "~/.lightning")
  -u, --login string      http basic auth login, "username:password" format (default "generate random")
      --no-test-conn      skip testing access to c-lightning rpc
      --no-tls            disable TLS for non-localhost hosts
      --no-webui          run API server without serving client assets
  -p, --port string       http(s) server port (default "9737")
  -k, --print-key         print access key to console
      --tls-path string   directory to read key.pem and cert.pem for TLS (default "~/.spark-wallet/tls/")
  -v, --version           output version number


Example
  $ sparko -l ~/.lightning

All options may also be specified as environment variables:
  $ LN_PATH=/data/lightning PORT=8070 NO_TLS=1 sparko
Or define a config file at ~/.config/sparko.toml or ~/.config/sparko.yaml‚èé
```


TLS
---

If you already have TLS keys generated by `spark-wallet` they'll be automatically reused. If you don't, you can use this script to generate a keypair:

```
mkdir -p ~/.spark-wallet/tls
openssl req -x509 -nodes -newkey rsa:2048 -keyout ~/.spark-wallet/tls/key.pem -out ~/.spark-wallet/tls/cert.pem -days 3650
```

Permissions
-----------

If you're looking for a RPC server to place in front of your lightningd node and want to restrict the client usage to just some methods (like what [lnd](https://github.com/lightningnetwork/lnd) does with their famous macaroons) you can set up extra keys that will grant access just to the `/rpc` endpoint and for which you can define fine-grained permissions.

It's an ACL-like security model that is much simpler (and old) than macaroons. Read more on [PERMISSIONS.md](PERMISSIONS.md).

FAQ
---

 * **How do I build?** `make` should work as long as you have [go-bindata](https://github.com/go-bindata/go-bindata) and all the other dependencies (maybe we move to the new Go modules thing, but not yet).
 * **What are these "lean" and "full" binaries?** Lean binaries don't include the HTML/JS UI, just the server (for when you just want to call RPC methods over the wire). Doesn't make much difference, but it's something.

License
-------

Whatever `spark-wallet` requires.
